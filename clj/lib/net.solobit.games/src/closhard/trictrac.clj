
(ns backgammon)

(defn initial-board [] ;; rank
  [\- \- \- \- \- \-   ;; 5
   \- \- \- \- \- \-   ;; 4
   \- \- \X \- \- \-   ;; 3
   \- \- \- \- \- \-   ;; 2
   \- \- \- \- \- \-]) ;; 1
;; \a \b \c \d \e \f
;; file ---------->

(comment "

  Folded raster 3 4
                2 1

  Playing directions :p1 = 1 2 3 4 (pos)
                     :p2 = 4 3 2 1 (neg)

  Maximum / minimum field values (pidgeon holes)
  -5 _ +5 where _ is 0


  Computation
  [0 0 0 0 0 0 #_ 0 0 0 0 0 0 #_ 0 0 0 0 0 0 #_ 0 0 0 0 0 0]

  Advantage * easy indexing
            * partition when needed
            * one single board = data structure easier
            * reversable

  Layout / view
  =============

  Slot width 1pt [_] -> [1] -> [2] .. [5] (can't nicely show [-5])
  Symbols as numbers let a 1 b 1 [a] [b]

  Narrow gutter 1pt (no sector divisor)

  013 014 015 016 017 018 019 020 021 022 023 024
  |_| |_| |_| |_| |_| |_| |_| |_| |_| |_| |_| |_|
  |_| |_| |_| |_| |_| |_| |_| |_| |_| |_| |_| |_|
  |_| |_| |_| |_| |_| |_| |_| |_| |_| |_| |_| |_|
  |_| |_| |_| |_| |_| |_| |_| |_| |_| |_| |_| |_|
  |_| |_| |_| |_| |_| |_| |_| |_| |_| |_| |_| |_|
  --- --- --- --- --- --- --- --- --- --- --- ---
  |_| |_| |_| |_| |_| |_| |_| |_| |_| |_| |_| |_|
  |_| |_| |_| |_| |_| |_| |_| |_| |_| |_| |_| |_|
  |_| |_| |_| |_| |_| |_| |_| |_| |_| |_| |_| |_|
  |_| |_| |_| |_| |_| |_| |_| |_| |_| |_| |_| |_|
  |_| |_| |_| |_| |_| |_| |_| |_| |_| |_| |_| |_|
  012 011 010 009 008 007 006 005 004 003 002 001

  With sector divisor

  013 014 015 016 017 018 019 020 021 022 023 024
  |_| |_| |_| |_| |_| |_|*|_| |_| |_| |_| |_| |_|
  |_| |_| |_| |_| |_| |_|*|_| |_| |_| |_| |_| |_|
  |_| |_| |_| |_| |_| |_|*|_| |_| |_| |_| |_| |_|
  |_| |_| |_| |_| |_| |_|*|_| |_| |_| |_| |_| |_|
  |_| |_| |_| |_| |_| |_|*|_| |_| |_| |_| |_| |_|
  --- --- --- --- --- ---*--- --- --- --- --- ---
  |_| |_| |_| |_| |_| |_|*|_| |X| |_| |_| |_| |_|
  |_| |_| |_| |_| |_| |_|*|_| |X| |_| |_| |_| |_|
  |_| |_| |_| |_| |_| |_|*|_| |S| |_| |_| |_| |_|
  |_| |_| |b| |_| |_| |_|*|_| |2| |_| |_| |_| |_|
  |_| |_| |b| |_| |_| |_|*|_| |1| |_| |_| |_| |_|
  012 011 010 009 008 007 006 005 004 003 002 001

  Medium gutter 2pt

  013  014  015  016  017  018  019  020  021  022  023  024
  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|
  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|
  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|
  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|
  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|
  ---  ---  ---  ---  ---  ---  ---  ---  ---  ---  ---  ---
  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|
  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|
  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|
  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|
  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|  |_|
  012  011  010  009  008  007  006  005  004  003  002  001

  Wide gutter 3pt

  013   014   015   016   017   018   019   020   021   022   023   024
  |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|
  |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|
  |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|
  |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|
  |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|
  ---   ---   ---   ---   ---   ---   ---   ---   ---   ---   ---   ---
  |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|
  |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|
  |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|
  |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|
  |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|   |_|
  012   011   010   009   008   007   006   005   004   003   002   001



  Game variations:

  Supercharge = stack 8 atoms to achieve critical mass.
  The center of gravity implodes and shoots the top 3 back to the stack.

   V
  |8| - critical .............. 3/15
  |7|  ........................ 2/15
  |6| - outer shell ........... 1/15

  [5] <- take first
  [4] <- take second
  [S] <-- supercharge = hittable? 2 stones
  [2]
  [1]

  May last for x amount of time
  This forces a lot of options to consider: can I miss those 3 to stack on the field? do I want them back in the stack?
  is that good or bad, extra stones in the stack? can I play those 2 covering the nucleus? can I do that in time?
  Only reason you would want to do this is to force a decission and massively set the other player back (panic/vital)










  ")


(defn bg [] [0 0 0 0 0 0 #_ 0 0 0 0 0 0

             0 0 0 0 0 0 #_ 0 0 0 0 0 0])


(defn lookup [board pos]
  (let [
        [file rank] (map int pos)
        [fc rc]     (map int [\a \0])
        f           (- file fc)
        r           (* 6 (- 5 (- rank rc)))
        index       (+ f r)
       ]

    (board index)))

(lookup (initial-board) [\c \3])

(map int [\a \0])

